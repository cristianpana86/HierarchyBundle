{% extends "CPANA\HierarchyBundle::layout.html.twig"%}

{% form_theme form 'CPANA\HierarchyBundle:Form:bootstrap_3_layout.html.twig' %}
{% form_theme form_g 'CPANA\HierarchyBundle:Form:bootstrap_3_layout.html.twig' %}

{% block content %}

<div class="container">
  <h2>Welcome to Admin area</h2>
  <p>Add new Groups, Users  using the below buttons or search for existing ones and edit them</p>
  <a href="{{ path('ghm_admin_create_group') }}" class="btn btn-info" role="button">Add Group</a>
  <a href="{{ path('ghm_admin_create_user') }}" class="btn btn-info" role="button">Add User</a>
<hr>

	<div>
		{{ form_start(form) }}
			{{ form_errors(form) }}
			{{ form_row(form.search) }}
		{{ form_end(form) }}
		
		{% if message is defined %}
			<hr>
			<h3 style="color:red;" >{{ message  }} </h3>
		{% endif %}
	</div>
		
	<div>
		{{ form_start(form_g) }}
			{{ form_errors(form_g) }}
			{{ form_row(form_g.search) }}
		{{ form_end(form_g) }}
		
		{% if message_g is defined %}
			<hr>
			<h3 style="color:red;" >{{ message_g  }} </h3>
		{% endif %}
	</di>

	{% if rows is defined %}
        <h3>Search results</h3>
		{% for row in rows %}
	        <hr>
		    <p><a href="{{ path('ghm_admin_show_user', {'node_id': row.current().getId() }) }}">{{ row.current().getProperty(display_value_user)  }}</a></p> 
        {% endfor %}
		
	{% endif %}
	
	{% if rows_g is defined %}
        <h3>Search results</h3>
		{% for row in rows_g %}
	        <hr>
		    <p><a href="{{ path('ghm_admin_show_group', {'node_id': row.current().getId() }) }}">{{ row.current().getProperty(display_value_group)  }}</a></p> 
        {% endfor %}
		
	{% endif %}
</div>
{% endblock %}
